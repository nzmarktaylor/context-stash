# Initial Implementation: CLI Entry Point

## Context

This is the initial build of context-stash v1.0.0, created on January 5, 2026. The `main()` function serves as the entry point for the command-line interface.

## Design Decision

The CLI supports three primary commands:
- `--init`: Initialize a workspace with `.context/` directory and configuration
- `--serve`: Start the MCP server for AI agent communication
- `--help`: Display usage information

## Implementation Approach

We chose a simple, synchronous command-line argument parser using `process.argv.slice(2)` rather than a full CLI framework because:

1. **Minimal dependencies**: Keeps the package lightweight for global installation
2. **Simple requirements**: Only three commands needed
3. **Fast startup**: No framework overhead
4. **Easy to understand**: Clear, direct implementation

## Architectural Notes

- The function is async to support initialization and server startup
- Error handling is centralized with try/catch and process.exit(1)
- Help text is embedded directly (no external files)
- Working directory is always `process.cwd()` for workspace-scoped operations

## Future Considerations

If more commands are added in the future, consider using a lightweight CLI framework like `commander` or `yargs`. For now, the simple approach serves the purpose well.
